<!DOCTYPE html>
<html>
<head>
    <title>Leaderboard</title>
    <link href="https://fonts.googleapis.com/css?family=Oswald|Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        body {
            background: #0e0e0e;
            color: #fff;
            font-family: sans-serif;
            background: url(http://enclavegames.com/img/game-candy-square.png);
            background-repeat: no-repeat;
            background-size: contain;
            /* width: 100%; */
            background-size: 100%;
        }


        /*Responsive table*/
        table {
            width: 100%;
            border-collapse: collapse;
            background: #c0dce4;
            color: #eeeeee;
        }

        td, th {
            font-family: 'Oswald', sans-serif;
            padding: 8px;
            text-align: left;
        }

        /* Zebra striping */
        tr:nth-of-type(odd) {
            background: rgba(255, 13, 0, 0.8);
        }

        th {
            background: white;
            color: black;
            font-weight: bold;
        }

        h1 {
            text-align: center;
            font-weight: bold;
        }

        h1 a {
            font-family: 'Roboto', sans-serif;
            text-decoration: none;
            color: black;
        }

    </style>
</head>
<body onload="loadDoc()">
<div style="margin: 8% 10%" class="w3-container" >
<h1><a href="https://www.prodevans.com/" target="_blank">Leaderboard</a></h1>

<div id="demo">


</div>
</div>
</body>

<script>
    function loadDoc() {






            setInterval(
    function load() {
        var obj, dbParam, myObj, x, txt = " "
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                myObj = JSON.parse(this.responseText);
                bubble_Sort(myObj.player)

                // console.log(this.responseText);
                // console.log(myObj);
                // console.log(myObj.player.length);
                var i = 0;
                txt += "<table border='1'> <thead><tr>" +
                    "<th>First Name</th>" +
                    "<th>Last Name</th>" +
                    "<th>Score</th>" +
                    "</tr> </thead> <tbody>"
                for (i;i<myObj.player.length;i++) {

                    txt += "<tr><td>" +(i+1)+ "</td><td>" + myObj.player[i].name + "</td><td>"+myObj.player[i].score+"</td></td></tr>";
                }
                txt += "</tbody></table>"
                document.getElementById("demo").innerHTML = txt;
            }
        };
        xhttp.open("GET", "/leaderboard", true);
        xhttp.send();

    }, 500);}

    function bubble_Sort(a)
    {
        var swapp;
        var n = a.length-1;
        var x=a;
        do {
            swapp = false;
            for (var i=0; i < n; i++)
            {
                if (x[i].score < x[i+1].score)
                {
                    var temp = x[i];
                    x[i] = x[i+1];
                    x[i+1] = temp;
                    swapp = true;
                }
            }
            n--;
        } while (swapp);
        return x;
    }
</script>
</html>